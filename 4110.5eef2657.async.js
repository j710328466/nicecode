"use strict";(self.webpackChunknicecode=self.webpackChunknicecode||[]).push([[4110],{54110:function(cr,Et,C){C.d(Et,{Qw:function(){return Be},FJ:function(){return Ie},hT:function(){return Qe},OF:function(){return Ge},ZP:function(){return qt}});var nt=C(48063),H=C(13405),w=C(28730),$=C(18534),at=C(57596),xt=C(64634),lt=C(22495),kt=C(61274),je=C(80077),it=C(2397),ke=C(25900),r=C(85170),It=function(e){var t=r.useRef({valueLabels:new Map});return r.useMemo(function(){var n=t.current.valueLabels,o=new Map,a=e.map(function(i){var l,u=i.value,c=(l=i.label)!==null&&l!==void 0?l:n.get(u);return o.set(u,c),(0,w.Z)((0,w.Z)({},i),{},{label:c})});return t.current.valueLabels=o,[a]},[e])},Tt=function(e,t,n,o){return r.useMemo(function(){var a=e.map(function(c){var f=c.value;return f}),i=t.map(function(c){var f=c.value;return f}),l=a.filter(function(c){return!o[c]});if(n){var u=(0,je.S)(a,!0,o);a=u.checkedKeys,i=u.halfCheckedKeys}return[Array.from(new Set([].concat((0,H.Z)(l),(0,H.Z)(a)))),i]},[e,t,n,o])},Dt=C(73450),wt=function(e,t){return r.useMemo(function(){var n=(0,Dt.I8)(e,{fieldNames:t,initWrapper:function(a){return(0,w.Z)((0,w.Z)({},a),{},{valueEntities:new Map})},processEntity:function(a,i){var l=a.node[t.value];if(!1)var u;i.valueEntities.set(l,a)}});return n},[e,t])},Lt=C(20237),Kt=C(91654),Vt=function(){return null},Ge=Vt,Zt=["children","value"];function ut(e){return(0,Kt.Z)(e).map(function(t){if(!r.isValidElement(t)||!t.type)return null;var n=t,o=n.key,a=n.props,i=a.children,l=a.value,u=(0,at.Z)(a,Zt),c=(0,w.Z)({key:o,value:l},u),f=ut(i);return f.length&&(c.children=f),c}).filter(function(t){return t})}function Je(e){if(!e)return e;var t=(0,w.Z)({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return(0,ke.ZP)(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Nt(e,t,n,o,a,i){var l=null,u=null;function c(){function f(d){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(b,R){var I="".concat(L,"-").concat(R),Z=b[i.value],F=n.includes(Z),J=f(b[i.children]||[],I,F),W=r.createElement(Ge,b,J.map(function(p){return p.node}));if(t===Z&&(l=W),F){var te={pos:I,node:W,children:J};return k||u.push(te),te}return null}).filter(function(b){return b})}u||(u=[],f(o),u.sort(function(d,L){var k=d.node.props.value,b=L.node.props.value,R=n.indexOf(k),I=n.indexOf(b);return R-I}))}Object.defineProperty(e,"triggerNode",{get:function(){return(0,ke.ZP)(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),l}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return(0,ke.ZP)(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),a?u:u.map(function(d){var L=d.node;return L})}})}var Mt=function(e,t,n){var o=n.treeNodeFilterProp,a=n.filterTreeNode,i=n.fieldNames,l=i.children;return r.useMemo(function(){if(!t||a===!1)return e;var u;if(typeof a=="function")u=a;else{var c=t.toUpperCase();u=function(L,k){var b=k[o];return String(b).toUpperCase().includes(c)}}function f(d){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return d.reduce(function(k,b){var R=b[l],I=L||u(t,Je(b)),Z=f(R||[],I);return(I||Z.length)&&k.push((0,w.Z)((0,w.Z)({},b),{},(0,Lt.Z)({isLeaf:void 0},l,Z))),k},[])}return f(e)},[e,t,l,o,a])};function ot(e){var t=r.useRef();t.current=e;var n=r.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Pt(e,t){var n=t.id,o=t.pId,a=t.rootPId,i={},l=[],u=e.map(function(c){var f=(0,w.Z)({},c),d=f[n];return i[d]=f,f.key=f.key||d,f});return u.forEach(function(c){var f=c[o],d=i[f];d&&(d.children=d.children||[],d.children.push(c)),(f===a||!d&&a===null)&&l.push(c)}),l}function At(e,t,n){return r.useMemo(function(){return e?n?Pt(e,(0,w.Z)({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:ut(t)},[t,n,e])}var Ot=r.createContext(null),ct=Ot,Rt=C(36730),ee=C(4642),Ht=C(97968),$t=r.createContext(null),dt=$t;function Ft(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function Wt(e){var t=e||{},n=t.label,o=t.value,a=t.children,i=o||"value";return{_title:n?[n]:["title","label"],value:i,key:i,children:a||"children"}}function Ye(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function Ut(e,t){var n=[];function o(a){a.forEach(function(i){var l=i[t.children];l&&(n.push(i[t.value]),o(l))})}return o(e),n}function st(e){return e==null}var jt={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Gt=function(t,n){var o=(0,lt.lk)(),a=o.prefixCls,i=o.multiple,l=o.searchValue,u=o.toggleOpen,c=o.open,f=o.notFoundContent,d=r.useContext(dt),L=d.virtual,k=d.listHeight,b=d.listItemHeight,R=d.listItemScrollOffset,I=d.treeData,Z=d.fieldNames,F=d.onSelect,J=d.dropdownMatchSelectWidth,W=d.treeExpandAction,te=d.treeTitleRender,p=r.useContext(ct),N=p.checkable,K=p.checkedKeys,oe=p.halfCheckedKeys,ce=p.treeExpandedKeys,ze=p.treeDefaultExpandAll,Xe=p.treeDefaultExpandedKeys,de=p.onTreeExpand,Te=p.treeIcon,De=p.showTreeIcon,we=p.switcherIcon,Le=p.treeLine,Ke=p.treeNodeFilterProp,Ve=p.loadData,se=p.treeLoadedKeys,Ze=p.treeMotion,Ne=p.onTreeLoad,Me=p.keyEntities,Y=r.useRef(),fe=(0,Ht.Z)(function(){return I},[c,I],function(E,h){return h[0]&&E[1]!==h[1]}),Pe=r.useState(null),ve=(0,$.Z)(Pe,2),B=ve[0],he=ve[1],M=Me[B],Ae=r.useMemo(function(){return N?{checked:K,halfChecked:oe}:null},[N,K,oe]);r.useEffect(function(){if(c&&!i&&K.length){var E;(E=Y.current)===null||E===void 0||E.scrollTo({key:K[0]}),he(K[0])}},[c]);var ge=String(l).toLowerCase(),Oe=function(h){return ge?String(h[Ke]).toLowerCase().includes(ge):!1},Re=r.useState(Xe),ye=(0,$.Z)(Re,2),Q=ye[0],qe=ye[1],_e=r.useState(null),z=(0,$.Z)(_e,2),X=z[0],pe=z[1],P=r.useMemo(function(){return ce?(0,H.Z)(ce):l?X:Q},[Q,X,ce,l]);r.useEffect(function(){l&&pe(Ut(I,Z))},[l]);var et=function(h){qe(h),pe(h),de&&de(h)},me=function(h){h.preventDefault()},U=function(h,re){var A=re.node;N&&Ye(A)||(F(A.key,{selected:!K.includes(A.key)}),i||u(!1))};if(r.useImperativeHandle(n,function(){var E;return{scrollTo:(E=Y.current)===null||E===void 0?void 0:E.scrollTo,onKeyDown:function(re){var A,He=re.which;switch(He){case ee.Z.UP:case ee.Z.DOWN:case ee.Z.LEFT:case ee.Z.RIGHT:(A=Y.current)===null||A===void 0||A.onKeyDown(re);break;case ee.Z.ENTER:{if(M){var Ce=(M==null?void 0:M.node)||{},tt=Ce.selectable,ne=Ce.value;tt!==!1&&U(null,{node:{key:B},selected:!K.includes(ne)})}break}case ee.Z.ESC:u(!1)}},onKeyUp:function(){}}}),fe.length===0)return r.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:me},f);var Se={fieldNames:Z};return se&&(Se.loadedKeys=se),P&&(Se.expandedKeys=P),r.createElement("div",{onMouseDown:me},M&&c&&r.createElement("span",{style:jt,"aria-live":"assertive"},M.node.value),r.createElement(Rt.Z,(0,nt.Z)({ref:Y,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:fe,height:k,itemHeight:b,itemScrollOffset:R,virtual:L!==!1&&J!==!1,multiple:i,icon:Te,showIcon:De,switcherIcon:we,showLine:Le,loadData:l?null:Ve,motion:Ze,activeKey:B,checkable:N,checkStrictly:!0,checkedKeys:Ae,selectedKeys:N?[]:K,defaultExpandAll:ze,titleRender:te},Se,{onActiveChange:he,onSelect:U,onCheck:U,onExpand:et,onLoad:Ne,filterTreeNode:Oe,expandAction:W})))},Jt=r.forwardRef(Gt),Yt=Jt,Be="SHOW_ALL",Qe="SHOW_PARENT",Ie="SHOW_CHILD";function ft(e,t,n,o){var a=new Set(e);return t===Ie?e.filter(function(i){var l=n[i];return!(l&&l.children&&l.children.some(function(u){var c=u.node;return a.has(c[o.value])})&&l.children.every(function(u){var c=u.node;return Ye(c)||a.has(c[o.value])}))}):t===Qe?e.filter(function(i){var l=n[i],u=l?l.parent:null;return!(u&&!Ye(u.node)&&a.has(u.key))}):e}function dr(e){var t=e.searchPlaceholder,n=e.treeCheckStrictly,o=e.treeCheckable,a=e.labelInValue,i=e.value,l=e.multiple;warning(!t,"`searchPlaceholder` has been removed."),n&&a===!1&&warning(!1,"`treeCheckStrictly` will force set `labelInValue` to `true`."),(a||n)&&warning(toArray(i).every(function(u){return u&&_typeof(u)==="object"&&"value"in u}),"Invalid prop `value` supplied to `TreeSelect`. You should use { label: string, value: string | number } or [{ label: string, value: string | number }] instead."),n||l||o?warning(!i||Array.isArray(i),"`value` should be an array when `TreeSelect` is checkable or multiple."):warning(!Array.isArray(i),"`value` should not be array when `TreeSelect` is single mode.")}var sr=null,Bt=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender"];function Qt(e){return!e||(0,xt.Z)(e)!=="object"}var zt=r.forwardRef(function(e,t){var n=e.id,o=e.prefixCls,a=o===void 0?"rc-tree-select":o,i=e.value,l=e.defaultValue,u=e.onChange,c=e.onSelect,f=e.onDeselect,d=e.searchValue,L=e.inputValue,k=e.onSearch,b=e.autoClearSearchValue,R=b===void 0?!0:b,I=e.filterTreeNode,Z=e.treeNodeFilterProp,F=Z===void 0?"value":Z,J=e.showCheckedStrategy,W=e.treeNodeLabelProp,te=e.multiple,p=e.treeCheckable,N=e.treeCheckStrictly,K=e.labelInValue,oe=e.fieldNames,ce=e.treeDataSimpleMode,ze=e.treeData,Xe=e.children,de=e.loadData,Te=e.treeLoadedKeys,De=e.onTreeLoad,we=e.treeDefaultExpandAll,Le=e.treeExpandedKeys,Ke=e.treeDefaultExpandedKeys,Ve=e.onTreeExpand,se=e.treeExpandAction,Ze=e.virtual,Ne=e.listHeight,Me=Ne===void 0?200:Ne,Y=e.listItemHeight,fe=Y===void 0?20:Y,Pe=e.listItemScrollOffset,ve=Pe===void 0?0:Pe,B=e.onDropdownVisibleChange,he=e.dropdownMatchSelectWidth,M=he===void 0?!0:he,Ae=e.treeLine,ge=e.treeIcon,Oe=e.showTreeIcon,Re=e.switcherIcon,ye=e.treeMotion,Q=e.treeTitleRender,qe=(0,at.Z)(e,Bt),_e=(0,kt.ZP)(n),z=p&&!N,X=p||N,pe=N||K,P=X||te,et=(0,it.Z)(l,{value:i}),me=(0,$.Z)(et,2),U=me[0],Se=me[1],E=r.useMemo(function(){return p?J||Ie:Be},[J,p]),h=r.useMemo(function(){return Wt(oe)},[JSON.stringify(oe)]),re=(0,it.Z)("",{value:d!==void 0?d:L,postState:function(s){return s||""}}),A=(0,$.Z)(re,2),He=A[0],Ce=A[1],tt=function(s){Ce(s),k==null||k(s)},ne=At(ze,Xe,ce),vt=wt(ne,h),V=vt.keyEntities,q=vt.valueEntities,ht=r.useCallback(function(v){var s=[],g=[];return v.forEach(function(m){q.has(m)?g.push(m):s.push(m)}),{missingRawValues:s,existRawValues:g}},[q]),gt=Mt(ne,He,{fieldNames:h,treeNodeFilterProp:F,filterTreeNode:I}),yt=r.useCallback(function(v){if(v){if(W)return v[W];for(var s=h._title,g=0;g<s.length;g+=1){var m=v[s[g]];if(m!==void 0)return m}}},[h,W]),be=r.useCallback(function(v){var s=Ft(v);return s.map(function(g){return Qt(g)?{value:g}:g})},[]),$e=r.useCallback(function(v){var s=be(v);return s.map(function(g){var m=g.label,T=g.value,x=g.halfChecked,S,y=q.get(T);if(y){var D;m=(D=m)!==null&&D!==void 0?D:yt(y.node),S=y.node.disabled}else if(m===void 0){var j=be(U).find(function(Ee){return Ee.value===T});m=j.label}return{label:m,value:T,halfChecked:x,disabled:S}})},[q,yt,be,U]),pt=r.useMemo(function(){return be(U)},[be,U]),_t=r.useMemo(function(){var v=[],s=[];return pt.forEach(function(g){g.halfChecked?s.push(g):v.push(g)}),[v,s]},[pt]),mt=(0,$.Z)(_t,2),ae=mt[0],St=mt[1],Ct=r.useMemo(function(){return ae.map(function(v){return v.value})},[ae]),er=Tt(ae,St,z,V),bt=(0,$.Z)(er,2),le=bt[0],Fe=bt[1],tr=r.useMemo(function(){var v=ft(le,E,V,h),s=v.map(function(x){var S,y;return(S=(y=V[x])===null||y===void 0||(y=y.node)===null||y===void 0?void 0:y[h.value])!==null&&S!==void 0?S:x}),g=s.map(function(x){var S=ae.find(function(D){return D.value===x}),y;return K&&S.label!==void 0?y=S.label:!K&&Q&&(y=Q(S)),{value:x,label:y}}),m=$e(g),T=m[0];return!P&&T&&st(T.value)&&st(T.label)?[]:m.map(function(x){var S;return(0,w.Z)((0,w.Z)({},x),{},{label:(S=x.label)!==null&&S!==void 0?S:x.value})})},[h,P,le,ae,$e,E,V]),rr=It(tr),nr=(0,$.Z)(rr,1),ar=nr[0],We=ot(function(v,s,g){var m=$e(v);if(Se(m),R&&Ce(""),u){var T=v;if(z){var x=ft(v,E,V,h);T=x.map(function(O){var G=q.get(O);return G?G.node[h.value]:O})}var S=s||{triggerValue:void 0,selected:void 0},y=S.triggerValue,D=S.selected,j=T;if(N){var Ee=St.filter(function(O){return!T.includes(O.value)});j=[].concat((0,H.Z)(j),(0,H.Z)(Ee))}var xe=$e(j),_={preValue:ae,triggerValue:y},ie=!0;(N||g==="selection"&&!D)&&(ie=!1),Nt(_,y,v,ne,ie,h),X?_.checked=D:_.selected=D;var Ue=pe?xe:xe.map(function(O){return O.value});u(P?Ue:Ue[0],pe?null:xe.map(function(O){return O.label}),_)}}),rt=r.useCallback(function(v,s){var g,m=s.selected,T=s.source,x=V[v],S=x==null?void 0:x.node,y=(g=S==null?void 0:S[h.value])!==null&&g!==void 0?g:v;if(!P)We([y],{selected:!0,triggerValue:y},"option");else{var D=m?[].concat((0,H.Z)(Ct),[y]):le.filter(function(G){return G!==y});if(z){var j=ht(D),Ee=j.missingRawValues,xe=j.existRawValues,_=xe.map(function(G){return q.get(G).key}),ie;if(m){var Ue=(0,je.S)(_,!0,V);ie=Ue.checkedKeys}else{var O=(0,je.S)(_,{checked:!1,halfCheckedKeys:Fe},V);ie=O.checkedKeys}D=[].concat((0,H.Z)(Ee),(0,H.Z)(ie.map(function(G){return V[G].node[h.value]})))}We(D,{selected:m,triggerValue:y},T||"option")}m||!P?c==null||c(y,Je(S)):f==null||f(y,Je(S))},[ht,q,V,h,P,Ct,We,z,c,f,le,Fe]),lr=r.useCallback(function(v){if(B){var s={};Object.defineProperty(s,"documentClickClose",{get:function(){return(0,ke.ZP)(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),B(v,s)}},[B]),ir=ot(function(v,s){var g=v.map(function(m){return m.value});if(s.type==="clear"){We(g,{},"selection");return}s.values.length&&rt(s.values[0].value,{selected:!1,source:"selection"})}),ur=r.useMemo(function(){return{virtual:Ze,dropdownMatchSelectWidth:M,listHeight:Me,listItemHeight:fe,listItemScrollOffset:ve,treeData:gt,fieldNames:h,onSelect:rt,treeExpandAction:se,treeTitleRender:Q}},[Ze,M,Me,fe,ve,gt,h,rt,se,Q]),or=r.useMemo(function(){return{checkable:X,loadData:de,treeLoadedKeys:Te,onTreeLoad:De,checkedKeys:le,halfCheckedKeys:Fe,treeDefaultExpandAll:we,treeExpandedKeys:Le,treeDefaultExpandedKeys:Ke,onTreeExpand:Ve,treeIcon:ge,treeMotion:ye,showTreeIcon:Oe,switcherIcon:Re,treeLine:Ae,treeNodeFilterProp:F,keyEntities:V}},[X,de,Te,De,le,Fe,we,Le,Ke,Ve,ge,ye,Oe,Re,Ae,F,V]);return r.createElement(dt.Provider,{value:ur},r.createElement(ct.Provider,{value:or},r.createElement(lt.Ac,(0,nt.Z)({ref:t},qe,{id:_e,prefixCls:a,mode:P?"multiple":void 0,displayValues:ar,onDisplayValuesChange:ir,searchValue:He,onSearch:tt,OptionList:Yt,emptyOptions:!ne.length,onDropdownVisibleChange:lr,dropdownMatchSelectWidth:M}))))}),ue=zt;ue.TreeNode=Ge,ue.SHOW_ALL=Be,ue.SHOW_PARENT=Qe,ue.SHOW_CHILD=Ie;var Xt=ue,qt=Xt}}]);
